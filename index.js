const chalk=require("chalk"),TAG_ARGUMENTS="[object Arguments]",TAG_ARRAY="[object Array]",TAG_ARRAY_BUFFER="[object ArrayBuffer]",TAG_ASYNC_FUNCTION="[object AsyncFunction]",TAG_BIGINT="[object BigInt]",TAG_BOOL="[object Boolean]",TAG_DATE="[object Date]",TAG_ERROR="[object Error]",TAG_FUNCTION="[object Function]",TAG_GENERATOR="[object Generator]",TAG_GENERATOR_FUNCTION="[object GeneratorFunction]",TAG_GLOBAL="[object global]",TAG_MAP="[object Map]",TAG_NULL="[object Null]",TAG_NUMBER="[object Number]",TAG_OBJECT="[object Object]",TAG_PROMISE="[object Promise]",TAG_REGEXP="[object RegExp]",TAG_SET="[object Set]",TAG_SHARED_ARRAY_BUFFER="[object SharedArrayBuffer]",TAG_STRING="[object String]",TAG_SYMBOL="[object Symbol]",TAG_VOID="[object Undefined]",TAG_WEAK_MAP="[object WeakMap]",TAG_WEAK_SET="[object WeakSet]",TAG_WINDOW="[object Window]",OPTIONS_DEFAULT={arrayMaxElements:99,assignSymbol:"â†’",clear:!1,colorize:!0,console:!0,depth:20,exit:!1,indent:"Ë‘Ë‘",indentPad:1,mapMaxEntries:99,objectMaxProps:99,quotesEnd:'"',quotesStart:'"',setMaxValues:99,stringMaxLength:360},THEME_DARK={argument:[253,151,31],boolean:[174,129,255],comment:[117,113,94],keyword:[249,38,114],name:[230,219,116],number:[174,129,255],plain:[255,255,255],property:[102,217,239],string:[166,226,46]},THEME_LIGHT={argument:[245,135,31],boolean:[66,113,174],comment:[117,113,94],keyword:[200,40,41],name:[201,159,0],number:[101,67,133],plain:[0,0,0],property:[32,123,129],string:[113,140,0]};function clearCli(){if("clear"in console)try{console.clear()}catch(t){}else try{process.stdout.write("[2J[0;0H")}catch(t){}}function processExit(){try{process.exit(0)}catch(t){}}function isNumericKey(t){return Number.isInteger(Number.parseInt(t))}function prototypeTag(t){return Object.prototype.toString.call(t)}function clearString(t){return t.length<12?t:(" "+t).slice(1)}function deCycle(t){const i=[],e=[];return function deReCycle(s,n){let r,a,o;if(!("object"!=typeof s||null===s||s instanceof Boolean||s instanceof Date||s instanceof Number||s instanceof RegExp||s instanceof String)){for(r=0;r<i.length;r+=1)if(i[r]===s)return{"&circularReference":e[r]};if(i.push(s),e.push(n),prototypeTag(s)===TAG_ARRAY)for(o=[],r=0;r<s.length;r+=1)o[r]=deReCycle(s[r],`${n}[" + index + "]`);else for(a in o=Object.create(t),s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=deReCycle(s[a],`${n}[${JSON.stringify(a)}]`));return o}return s}(t,"&")}function closureNameExtract(t){if(t.name)return t.name;const i=/^function\s+([\w]+)\s*\(/.exec(t.toString());return i?i[1]:""}function objSize(t){return Object.keys(t).length}function getClass(t){return t.constructor.name}function getType(t){let i=prototypeTag(t).toLowerCase().split("[object ").pop().split("]").shift();return["global","window"].includes(i)?"object":i.includes("error")?"error":i}class Theme{constructor(t=3,i){let e;switch(this.cli=new chalk.Instance({level:Math.min(t,chalk.supportsColor.level)}),!0){case"dark"===i:e=THEME_DARK;break;case"light"===i:e=THEME_LIGHT;break;case prototypeTag(i)===TAG_OBJECT:e={...THEME_DARK,...i};break;default:e=THEME_DARK}this.argument=this.compose(...e.argument),this.boolean=this.compose(...e.boolean),this.comment=this.compose(...e.comment),this.keyword=this.compose(...e.keyword),this.name=this.compose(...e.name),this.number=this.compose(...e.number),this.plain=this.compose(...e.plain),this.property=this.compose(...e.property),this.string=this.compose(...e.string)}static toRGB(t){return t=Number.parseInt(t.toString(),10),Number.isInteger(t)?Math.min(255,Math.max(0,t)):255}compose(t=255,i=255,e=255){return t=Theme.toRGB(t),i=Theme.toRGB(i),e=Theme.toRGB(e),s=>this.cli.rgb(t,i,e)(s.toString())}}class Consono{constructor(t={},i){this.setOptions(t),this.setTheme(i)}setTheme(t){this.cli=new Theme(this.colorize?3:0,t)}setOptions(t={}){t=t||{};const i={...OPTIONS_DEFAULT,...t};this.arrayMaxElements=i.arrayMaxElements,this.arrow=i.assignSymbol,this.clear=i.clear,this.colorize=i.colorize,this.console=i.console,this.currentDepth=0,this.depth=i.depth,this.exit=i.exit,this.indentType=i.indent,this.indent=this.indentType.repeat(i.indentPad),this.mapMaxEntries=i.mapMaxEntries,this.objectMaxProps=i.objectMaxProps,this.quotesEnd=i.quotesEnd,this.quotesStart=i.quotesStart,this.setMaxValues=i.setMaxValues,this.stringMaxLength=i.stringMaxLength}toPrintable(t,i="",e=!0,s=""){let n="",r="",a="",o=Number.MAX_SAFE_INTEGER;const l=getType(t);switch(l){case"array":{const e=t.length;r=e>this.arrayMaxElements?`${this.cli.keyword("array")}${s.length?` ${this.cli.keyword(s)}`:""} ${this.cli.plain("(")}${this.cli.argument("elements")}${this.cli.plain("=")}${this.cli.number(e)}${this.cli.plain(",")} ${this.cli.argument("shown")}=${this.cli.number(this.arrayMaxElements)}${this.cli.plain(")")} ${this.cli.plain("[")}\n`:`${this.cli.keyword("array")}${s.length?` ${this.cli.keyword(s)}`:""} ${this.cli.plain("(")}${this.cli.argument("elements")}${this.cli.plain("=")}${this.cli.number(e)}${this.cli.plain(")")} ${this.cli.plain("[")}\n`,a=`${i}${this.cli.plain("]")}`,o=this.arrayMaxElements;break}case"object":{const s=t;if(t=deCycle(t),!0===e){const e=objSize(t);let n="";n=e>this.objectMaxProps?`${this.cli.plain("(")}${this.cli.argument("props")}${this.cli.plain("=")}${this.cli.number(e)}${this.cli.plain(",")} ${this.cli.argument("shown")}${this.cli.plain("=")}${this.cli.number(this.objectMaxProps)}${this.cli.plain(")")}`:`${this.cli.plain("(")}${this.cli.argument("props")}${this.cli.plain("=")}${this.cli.number(e)}${this.cli.plain(")")}`,r=`${this.cli.keyword("object")} ${this.cli.keyword(getClass(s))} ${n} ${this.cli.plain("{")}\n`,a=`${i}${this.cli.plain("}")}`}else r=`${this.cli.plain("(")}\n`,a=`${i}${this.cli.plain(")")}`;o=this.objectMaxProps;break}case"arguments":{const e=t.length;r=e>this.arrayMaxElements?`${this.cli.keyword("arguments")} ${this.cli.plain("(")}${this.cli.argument("arity")}${this.cli.plain("=")}${this.cli.number(e)}, ${this.cli.argument("shown")}${this.cli.plain("=")}${this.cli.number(this.arrayMaxElements)}${this.cli.plain(")")} ${this.cli.plain("[")}\n`:`${this.cli.keyword("arguments")} ${this.cli.plain("(")}${this.cli.argument("arity")}${this.cli.plain("=")}${this.cli.number(e)}${this.cli.plain(")")} ${this.cli.plain("[")}\n`,a=`${i}${this.cli.plain("]")}`,o=this.arrayMaxElements;break}case"set":{const e=t.size;r=e>this.setMaxValues?`${this.cli.keyword("set")} ${this.cli.plain("(")}${this.cli.argument("size")}${this.cli.plain("=")}${this.cli.number(e)}${this.cli.plain(",")} ${this.cli.argument("shown")}${this.cli.plain("=")}${this.cli.number(this.setMaxValues)}${this.cli.plain(")")} ${this.cli.plain("{")}\n`:`${this.cli.keyword("set")} ${this.cli.plain("(")}${this.cli.argument("size")}${this.cli.plain("=")}${this.cli.number(e)}${this.cli.plain(")")} ${this.cli.plain("{")}\n`,a=`${i}}`,o=this.setMaxValues;break}case"map":{const e=t.size;r=e>this.mapMaxEntries?`${this.cli.keyword("map")} ${this.cli.plain("(")}${this.cli.argument("size")}${this.cli.plain("=")}${this.cli.number(e)}${this.cli.plain(",")} ${this.cli.argument("shown")}${this.cli.plain("=")}${this.cli.number(this.mapMaxEntries)}${this.cli.plain(")")} ${this.cli.plain("{")}\n`:`${this.cli.keyword("map")} ${this.cli.plain("(")}${this.cli.argument("size")}${this.cli.plain("=")}${this.cli.number(e)}${this.cli.plain(")")} ${this.cli.plain("{")}\n`,a=`${i}${this.cli.plain("}")}`,o=this.mapMaxEntries;break}default:return this.formatValue(i,t)}let c=0;switch(l){case"set":{const e=Array.from(t);for(const t in e){const s=e[t],r=this.formatValue(i,s);if(n+=this.formatAssign("set",i,t,r),c+=1,c>=o)break}break}case"map":for(const e of t.entries()){const[t,s]=e,r=this.formatValue(i,{key:t,value:s},!1);if(n+=this.formatAssign("map",i,t,r),c+=1,c>=o)break}break;default:{const e=Object.keys(t).sort((t,i)=>t.localeCompare(i)).reduce((t,i)=>(t[i]=void 0)||t,{});for(const s in e){if(!Object.prototype.hasOwnProperty.call(t,s))continue;const e=t[s],r=getType(e),a=this.formatValue(i,e);if(n+=this.formatAssign(r,i,s,a),c+=1,c>=o)break}break}}return`${r}${n}${a}`}formatValue(t,i,e=!0){let s="",n=getType(i),r="";const a=prototypeTag(i);switch(a){case TAG_VOID:[n,s]=this.formatUndefined();break;case TAG_NULL:[n,s]=this.formatNull();break;case TAG_GLOBAL:case TAG_WINDOW:[n,s]=this.formatGlobal(a,i,t);break;case TAG_BIGINT:[n,s]=this.formatBigInt(i);break;case TAG_NUMBER:[n,s]=this.formatNumber(i);break;case TAG_BOOL:[n,s]=this.formatBoolean(i);break;case TAG_STRING:[n,s]=this.formatString(i);break;case TAG_REGEXP:[n,s]=this.formatRegexp(i);break;case TAG_FUNCTION:case TAG_ASYNC_FUNCTION:case TAG_GENERATOR_FUNCTION:[n,s]=this.formatFunction(a,i);break;case TAG_DATE:[n,s]=this.formatDate(i);break;case TAG_ARGUMENTS:[n,s]=this.formatArguments(i);break;case TAG_SYMBOL:[n,s]=this.formatSymbol(i);break;case TAG_PROMISE:[n,s]=this.formatPromise();break;case TAG_GENERATOR:[n,s]=this.formatGenerator();break;case TAG_ERROR:[n,s]=this.formatError(i);break;case TAG_WEAK_SET:case TAG_WEAK_MAP:[n,s]=this.formatWeak(a);break;case TAG_SET:[n,s]=this.formatSet(i);break;case TAG_MAP:[n,s]=this.formatMap(i);break;case TAG_ARRAY_BUFFER:case TAG_SHARED_ARRAY_BUFFER:[n,s]=this.formatBuffer(a,i);break;default:if(a.includes("Array"))n="array",r=getClass(i).toLowerCase(),i=Array.from(i);else if(a.includes("Iterator]")){const s=a.split(" ")[1];if("Set"===s)return this.toPrintable(new Set(Array.from(i).map(t=>t[1])),t,e);if("Map"===s)return this.toPrintable(new Map(Array.from(i)),t,e);if("String"===s)return this.toPrintable(Array.from(i).map(t=>t[1]).join(""),t,e);if("Array"===s)return this.toPrintable(Array.from(i).map(t=>t[1]),t,e)}}switch(n){case"array":case"object":if(n="",this.currentDepth===this.depth){const t=objSize(i);let e="";e=t>this.objectMaxProps?`${this.cli.plain("(")}${this.cli.argument("props")}${this.cli.plain("=")}${this.cli.number(t)}${this.cli.plain(",")} ${this.cli.argument("shown")}${this.cli.plain("=")}${this.cli.number(this.objectMaxProps)}${this.cli.plain(")")}`:`${this.cli.plain("(")}${this.cli.argument("props")}${this.cli.plain("=")}${this.cli.number(t)}${this.cli.plain(")")}`,s=`${this.cli.keyword("object")} ${this.cli.keyword(getClass(i))} ${e}`}else{this.currentDepth+=1;const a="array"===n?`${this.cli.comment(t)}`:`${t}${this.cli.comment(this.indent)}`;s=this.toPrintable(i,a,e,r),this.currentDepth-=1}break;default:n.length||(n=a.split("[object ").pop().split("]").shift().toLowerCase(),s=i.toString())}return`${this.cli.keyword(n)}${n.length?this.cli.plain(" â€¢ "):""}${s}`}formatArguments(t){return["arguments",this.toPrintable(t)]}formatBigInt(t){return["number bigint",this.cli.number(t)]}formatBoolean(t){return["boolean",this.cli.boolean(t)]}formatBuffer(t,i){return[TAG_ARRAY_BUFFER?"array buffer":"array buffer shared",`${this.cli.plain("(")}${this.cli.argument("bytes")}${this.cli.plain("=")}${this.cli.number(i.byteLength)}${this.cli.plain(")")}`]}formatDate(t){return["date",this.cli.name(t.toISOString()+" â€¢ "+t.toString())]}formatError(t){return[`error ${getClass(t)}`,this.cli.string(t.message)]}formatFunction(t,i){let e="function";switch(t){case TAG_ASYNC_FUNCTION:e=`${e} async`;break;case TAG_GENERATOR_FUNCTION:e=`${e} generator`}const s=closureNameExtract(i);e=s.length?`${e} ${this.cli.name(s)}`:`${e} anonymous`;const n=`${i}`.replace(/\n+/g,"").split(")").shift()+") {â€¦}";return[e,this.cli.argument(n)]}formatGenerator(){return["generator",this.cli.argument("Generator {â€¦}")]}formatGlobal(t,i,e){return[`global ${t===TAG_WINDOW?"window":"this"}`,this.toPrintable({...i},`${e}${this.cli.comment(this.indent)}`)]}formatMap(t){return["map",this.toPrintable(t)]}formatNull(){return["empty",this.cli.string("null")]}formatNumber(t){let i="";return Number.isFinite(t)?i=Number.isInteger(t)?"number integer":"number float":(i="number",Number.isNaN(t)?i+=" nan":t===Number.POSITIVE_INFINITY?i+=" positive infinity":i+=" negative infinity"),[i,this.cli.number(t)]}formatPromise(){return["promise",this.cli.argument("Promise {â€¦}")]}formatRegexp(t){return[`regexp ${t.flags}`,this.cli.name(t)]}formatSet(t){return["set",this.toPrintable(t)]}formatString(t){const i=[...t],e=i.length,s=t.length;let n="";this.stringMaxLength>0&&(n=s!==e?i.slice(0,this.stringMaxLength).join(""):t.slice(0,this.stringMaxLength));let r="";return r=s===e?`${this.cli.string(this.quotesStart)}${this.cli.string(n||t)}${this.cli.string(this.quotesEnd)} ${this.cli.plain("(")}${this.cli.argument("length")}${this.cli.plain("=")}${this.cli.number(s)}`:`${this.cli.string(this.quotesStart)}${this.cli.string(n||t)}${this.cli.string(this.quotesEnd)} ${this.cli.plain("(")}${this.cli.argument("length")}${this.cli.plain("=")}${this.cli.number(s)}${this.cli.plain(",")} ${this.cli.argument("symbols")}${this.cli.plain("=")}${this.cli.number(e)}`,r=e>this.stringMaxLength?`${r}${this.cli.plain(",")} ${this.cli.argument("shown")}${this.cli.plain("=")}${this.cli.number(this.stringMaxLength)}${this.cli.plain(")")}`:`${r}${this.cli.plain(")")}`,clearString(n),["string",r]}formatSymbol(t){return["symbol",t.toString()]}formatUndefined(){return["empty",this.cli.string("undefined")]}formatWeak(t){return t===TAG_WEAK_MAP?["map weak",""]:["set weak",""]}formatAssign(t,i,e,s){let n;return"map"===t?`${i}${this.cli.comment(this.indent)}${s}${this.cli.plain(",")}\n`:"set"===t?`${i}${this.cli.comment(this.indent)}${this.cli.plain(this.arrow)} ${s}${this.cli.plain(",")}\n`:(n=isNumericKey(e)||"array"===t&&"string"!=typeof e?`${this.cli.plain("[")}${this.cli.property(e)}${this.cli.plain("]")}`:`${this.cli.plain(this.quotesStart)}${this.cli.property(e)}${this.cli.plain(this.quotesEnd)}`,`${i}${this.cli.comment(this.indent)}${n} ${this.cli.plain(this.arrow)} ${s}${this.cli.plain(",")}\n`)}log(t){if(!this.console)return this.toPrintable(t);this.clear&&clearCli(),console.log(this.toPrintable(t)),this.exit&&processExit()}}function consono(t,i=!0,e){const s={console:!0};"boolean"==typeof i?s.console=i:i&&"object"==typeof i&&Object.assign(s,i);const n=new Consono(i,e);if(!s.console)return n.toPrintable(t);s.clear&&clearCli(),console.log(n.toPrintable(t)),s.exit&&processExit()}Consono.factory=function factory(t=!0,i){const e={console:!0};"boolean"==typeof t?e.console=t:t&&"object"==typeof t&&Object.assign(e,t);const s=new Consono(t,i);return function consono(t){if(!e.console)return s.toPrintable(t);e.clear&&clearCli(),console.log(s.toPrintable(t)),e.exit&&processExit()}},module.exports={default:consono,consono:consono,Consono:Consono,options:OPTIONS_DEFAULT};
const TAG_ARGUMENTS="[object Arguments]",TAG_ARRAY="[object Array]",TAG_ARRAY_BUFFER="[object ArrayBuffer]",TAG_ASYNC_FUNCTION="[object AsyncFunction]",TAG_BIGINT="[object BigInt]",TAG_BOOL="[object Boolean]",TAG_DATE="[object Date]",TAG_ERROR="[object Error]",TAG_FUNCTION="[object Function]",TAG_GENERATOR="[object Generator]",TAG_GENERATOR_FUNCTION="[object GeneratorFunction]",TAG_GLOBAL="[object global]",TAG_MAP="[object Map]",TAG_NULL="[object Null]",TAG_NUMBER="[object Number]",TAG_OBJECT="[object Object]",TAG_PROMISE="[object Promise]",TAG_REGEXP="[object RegExp]",TAG_SET="[object Set]",TAG_SHARED_ARRAY_BUFFER="[object SharedArrayBuffer]",TAG_STRING="[object String]",TAG_SYMBOL="[object Symbol]",TAG_VOID="[object Undefined]",TAG_WEAK_MAP="[object WeakMap]",TAG_WEAK_SET="[object WeakSet]",TAG_WINDOW="[object Window]";function clearCli(){if("clear"in console)try{console.clear()}catch(t){}else try{process.stdout.write("[2J[0;0H")}catch(t){}}function processExit(){try{process.exit(0)}catch(t){}}function isNumericKey(t){return Number.isInteger(Number.parseInt(t))}function prototypeTag(t){return Object.prototype.toString.call(t)}function clearString(t){return t.length<12?t:(" "+t).slice(1)}function deCycle(t){const e=[],r=[];return function deReCycle(n,a){let o,s,i;if(!("object"!=typeof n||null===n||n instanceof Boolean||n instanceof Date||n instanceof Number||n instanceof RegExp||n instanceof String)){for(o=0;o<e.length;o+=1)if(e[o]===n)return{"&circularReference":r[o]};if(e.push(n),r.push(a),prototypeTag(n)===TAG_ARRAY)for(i=[],o=0;o<n.length;o+=1)i[o]=deReCycle(n[o],`${a}[" + index + "]`);else for(s in i=Object.create(t),n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=deReCycle(n[s],`${a}[${JSON.stringify(s)}]`));return i}return n}(t,"&")}function closureNameExtract(t){if(t.name)return t.name;const e=/^function\s+([\w\$]+)\s*\(/.exec(t.toString());return e?e[1]:""}function objSize(t){return Object.keys(t).length}function getClass(t){return t.constructor.name}function getType(t){let e=prototypeTag(t).toLowerCase().split("[object ").pop().split("]").shift();return["global","window"].includes(e)?"object":e.includes("error")?"error":e}class Consono{constructor(t={}){const e={arrayMaxElements:99,assignSymbol:"â†’",clear:!1,depth:20,exit:!1,indent:"Ë‘Ë‘",indentPad:1,objectMaxProps:99,quotesEnd:'"',quotesStart:'"',stringMaxLength:360,...t};this.depth=e.depth,this.indentType=e.indent,this.indent=this.indentType.repeat(e.indentPad),this.arrayMaxElements=e.arrayMaxElements,this.arrow=e.assignSymbol,this.objectMaxProps=e.objectMaxProps,this.quotesEnd=e.quotesEnd,this.quotesStart=e.quotesStart,this.stringMaxLength=e.stringMaxLength,this.currentDepth=0}toPrintable(t,e="",r=!0,n=""){let a="",o="",s="",i=Number.MAX_SAFE_INTEGER;const c=getType(t);switch(c){case"array":o=`array${n.length?` ${n}`:""} (elements=${t.length}) [\n`,s=`${e}]`,i=this.arrayMaxElements;break;case"object":const a=t;t=deCycle(t),!0===r?(o=`object ${getClass(a)} (props=${objSize(t)}) {\n`,s=`${e}}`):(o="(\n",s=`${e})`),i=this.objectMaxProps;break;case"arguments":o=`arguments (arity=${t.length}) [\n`,s=`${e}]`,i=this.arrayMaxElements;break;case"set":o=`set (size=${t.size}) {\n`,s=`${e}}`,i=this.arrayMaxElements;break;case"map":o=`map (size=${t.size}) {\n`,s=`${e}}`,i=this.objectMaxProps;break;default:return this.formatValue(e,t)}let l=0;switch(c){case"set":const r=Array.from(t);for(const t in r){const n=r[t],o=this.formatValue(e,n);if(a+=this.formatAssign("set",e,t,o),(l+=1)>=i)break}break;case"map":for(const r of t.entries()){const[t,n]=r,o=this.formatValue(e,{key:t,value:n},!1);if(a+=this.formatAssign("map",e,t,o),(l+=1)>=i)break}break;default:for(const r in t){if(!Object.prototype.hasOwnProperty.call(t,r))continue;const n=t[r],o=getType(n),s=this.formatValue(e,n);if(a+=this.formatAssign(o,e,r,s),(l+=1)>=i)break}}return`${o}${a}${s}`}formatValue(t,e,r=!0){let n="",a=getType(e),o="";const s=prototypeTag(e);switch(s){case TAG_VOID:[a,n]=this.formatUndefined();break;case TAG_NULL:[a,n]=this.formatNull();break;case TAG_GLOBAL:case TAG_WINDOW:[a,n]=this.formatGlobal(s,e,t);break;case TAG_BIGINT:[a,n]=this.formatBigInt(e);break;case TAG_NUMBER:[a,n]=this.formatNumber(e);break;case TAG_BOOL:[a,n]=this.formatBoolean(e);break;case TAG_STRING:[a,n]=this.formatString(e);break;case TAG_REGEXP:[a,n]=this.formatRegexp(e);break;case TAG_FUNCTION:case TAG_ASYNC_FUNCTION:case TAG_GENERATOR_FUNCTION:[a,n]=this.formatFunction(s,e);break;case TAG_DATE:[a,n]=this.formatDate(e);break;case TAG_ARGUMENTS:[a,n]=this.formatArguments(e);break;case TAG_SYMBOL:[a,n]=this.formatSymbol(e);break;case TAG_PROMISE:[a,n]=this.formatPromise(e);break;case TAG_GENERATOR:[a,n]=this.formatGenerator(e);break;case TAG_ERROR:[a,n]=this.formatError(e);break;case TAG_WEAK_SET:case TAG_WEAK_MAP:[a,n]=this.formatWeak(s,e);break;case TAG_SET:[a,n]=this.formatSet(e);break;case TAG_MAP:[a,n]=this.formatMap(e);break;case TAG_ARRAY_BUFFER:case TAG_SHARED_ARRAY_BUFFER:[a,n]=this.formatBuffer(s,e);break;default:if(s.includes("Array"))a="array",o=getClass(e).toLowerCase(),e=Array.from(e);else if(s.includes("Iterator]")){const n=s.split(" ")[1];if("Set"===n)return this.toPrintable(new Set(Array.from(e).map(t=>t[1])),t,r);if("Map"===n)return this.toPrintable(new Map(Array.from(e)),t,r);if("String"===n)return this.toPrintable(Array.from(e).map(t=>t[1]).join(""),t,r);if("Array"===n)return this.toPrintable(Array.from(e).map(t=>t[1]),t,r)}}switch(a){case"array":case"object":a="",this.currentDepth===this.depth?n=`${`object ${getClass(e)}`} (props=${objSize(e)})`:(this.currentDepth+=1,n=this.toPrintable(e,`${t}${this.indent}`,r,o),this.currentDepth-=1);break;default:a.length||(a=s.split("[object ").pop().split("]").shift().toLowerCase(),n=e.toString())}return`${a}${a.length?" â€¢ ":""}${n}`}formatArguments(t){return["arguments",this.toPrintable(t)]}formatBigInt(t){return["number bigint",t]}formatBoolean(t){return["boolean",t]}formatBuffer(t,e){return[TAG_ARRAY_BUFFER?"array buffer":"array buffer shared",`bytes: ${e.byteLength}`]}formatDate(t){return["date",t.toISOString()+" â€¢ "+t.toString()]}formatError(t){return[`error ${getClass(t)}`,t.message]}formatFunction(t,e){let r="function";switch(t){case TAG_ASYNC_FUNCTION:r=`${r} async`;break;case TAG_GENERATOR_FUNCTION:r=`${r} generator`}const n=closureNameExtract(e);return[r=n.length?`${r} ${this.quotesStart}${n}${this.quotesEnd}`:`${r} anonymous`,`${e}`.replace(/\n+/g,"").split(")").shift()+") {â€¦}"]}formatGenerator(t){return["generator","Generator {â€¦}"]}formatGlobal(t,e,r){return[`global ${t===TAG_WINDOW?"window":"this"}`,this.toPrintable({...e},`${r}${this.indent}`)]}formatMap(t){return["map",this.toPrintable(t)]}formatNull(){return["empty","null"]}formatNumber(t){let e="";return Number.isFinite(t)?e=Number.isInteger(t)?"number integer":"number float":(e="number",Number.isNaN(t)?e+=" nan":t===Number.POSITIVE_INFINITY?e+=" positive infinity":e+=" negative infinity"),[e,t]}formatPromise(t){return["promise","Promise {â€¦}"]}formatRegexp(t){return[`regexp ${t.flags}`,`${t}`]}formatSet(t){return["set",this.toPrintable(t)]}formatString(t){const e=[...t],r=e.length,n=t.length;let a="";this.stringMaxLength>0&&(a=n!==r?e.slice(0,this.stringMaxLength).join(""):t.slice(0,this.stringMaxLength));let o="";return o=n===r?`${`"${a||t}"`} (length=${n})`:`${`"${a||t}"`} (length=${n}, symbols=${r})`,clearString(a),["string",o]}formatSymbol(t){return["symbol",t.toString()]}formatUndefined(){return["empty","undefined"]}formatWeak(t,e){return t===TAG_WEAK_MAP?["map weak",""]:["set weak",""]}formatAssign(t,e,r,n){let a;return"map"===t?`${e}${this.indent}${n},\n`:"set"===t?`${e}${this.indent}${this.arrow} ${n},\n`:(a=isNumericKey(r)||"array"===t&&"string"!=typeof r?`[${r}]`:`${this.quotesStart}${r}${this.quotesEnd}`,`${e}${this.indent}${a} ${this.arrow} ${n},\n`)}}function consono(t,e=!0){const r={console:!0};"boolean"==typeof e?r.console=e:e&&"object"==typeof e&&Object.assign(r,e);const n=new Consono(e);if(!r.console)return n.toPrintable(t);r.clear&&clearCli(),console.log(n.toPrintable(t)),r.exit&&processExit()}module.exports.default=consono;